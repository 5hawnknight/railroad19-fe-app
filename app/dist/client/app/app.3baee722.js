"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}angular.module("projectDashboardApp",["projectDashboardApp.constants","ngCookies","ngResource","ngSanitize","ui.router","ngMaterial","ngLodash"]).config(["$urlRouterProvider","$locationProvider","$logProvider",function(a,b,c){a.otherwise("/"),c.debugEnabled(!1),b.html5Mode(!0)}]),angular.module("projectDashboardApp.util",[]),function(a,b){a.module("projectDashboardApp.constants",[]).constant("appConfig",{userRoles:["guest","user","admin"]})}(angular),function(){var a=function b(a,c,d,e){var f=this;_classCallCheck(this,b),this.projects=[],this.search=function(a){this.filters=a},this.gatherStatus=function(a){this.statusForRecords={divisions:{},status:{}},this.statusForRecords.divisions=c.countBy(a,function(a){return a.division}),this.statusForRecords.status=c.countBy(a,function(a){return a.status})},d.$on("changedRecord",function(a,b){console.log(a,b),e.show(e.simple().textContent(b).position("right top").capsule(!0).hideDelay(3e3))}),a.getMockData().then(function(a){f.projects=a,f.gatherStatus(f.projects)})};a.$inject=["API","lodash","$scope","$mdToast"],angular.module("projectDashboardApp").controller("MainController",a)}(),angular.module("projectDashboardApp").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"})}]),angular.module("projectDashboardApp").directive("record",function(){return{templateUrl:"app/record/record.html",restrict:"EA",scope:{datasource:"=",filter:"="},link:function(a,b,c,d){a.changeOwner,a.changeStatus,a.adjustBudget,a.searchFilters="";var e="",f="",g="";a.$watch("filter",function(b,c){b&&(a.searchFilters=angular.copy(a.filter))},!0),a.toggleBudget=function(b,c){null==a.adjustBudget||""===a.adjustBudget?(e=c.budget,a.adjustBudget=b):(e!==c.budget&&a.$emit("changedRecord","You have changed the budget for "+c.title+" to "+c.budget),e="",a.adjustBudget="")},a.toggleOwner=function(b,c){null==a.changeOwner||""===a.changeOwner?(f=c.project_owner,a.changeOwner=b):(f!==c.project_owner&&a.$emit("changedRecord","You have changed the Project Owner for "+c.title+" to "+c.project_owner),f="",a.changeOwner="")},a.toggleStatus=function(b,c){null==a.changeStatus||""===a.changeStatus?(g=c.status,a.changeStatus=b):(g!==c.status&&a.$emit("changedRecord","You have changed the Status for "+c.title+" to "+c.status),g="",a.changeStatus="")}}}}),angular.module("projectDashboardApp").filter("advanceSearch",["$filter",function(a){return function(b,c){var d,e,f=[],g=[];if(null==c||""==c)return b;var h=c.split(" ");return angular.forEach(h,function(c){c.search("-")!==-1?(g=c.split("-"),d=new Date(g[0])<new Date(g[1])?new Date(g[0]):new Date(g[1]),e=new Date(g[0])>new Date(g[1])?new Date(g[0]):new Date(g[1]),f=0==f.length?b:f,angular.forEach(f,function(a,b){var c=new Date(a.created).getTime();(c>e.getTime()||c<d.getTime())&&f.splice(b,1)})):(f=0==f.length?b:f,f=a("filter")(f,c))}),f}}]),angular.module("projectDashboardApp").factory("API",["$http",function(a){return{getMockData:function(){return a.get("json/mockData.json").then(function(a){return a.data})}}}]),function(){function a(a){var b={safeCb:function(a){return angular.isFunction(a)?a:angular.noop},urlParse:function(a){var b=document.createElement("a");return b.href=a,b},isSameOrigin:function(c,d){return c=b.urlParse(c),d=d&&[].concat(d)||[],d=d.map(b.urlParse),d.push(a.location),d=d.filter(function(a){return c.hostname===a.hostname&&c.port===a.port&&c.protocol===a.protocol}),d.length>=1}};return b}a.$inject=["$window"],angular.module("projectDashboardApp.util").factory("Util",a)}(),angular.module("projectDashboardApp").run(["$templateCache",function(a){a.put("app/main/main.html",'<section layout=row flex><md-sidenav class="md-sidenav-left md-whiteframe-z2 sideNavbar" md-component-id=left md-is-locked-open="$mdMedia(\'min-width: 333px\')"><md-toolbar class="sideNavHeader md-whiteframe-21dp"><h4 class=headerContent>Project Dashboard</h4></md-toolbar><md-content layout-padding><img id=dashboardImg src=assets/images/dashboard.a666d15e.svg alt=""><h4 class="colorPrime headerContent" style="margin-top: -21px">Dashboard</h4><md-divider></md-divider><img id=dashboardImg src=assets/images/profile.b22c7f78.svg alt=""><h4 class=headerContent style="margin-top: -21px">Profile</h4><md-divider></md-divider></md-content></md-sidenav><md-content><div><md-toolbar layout=row layout-align="end center" class=md-default-theme><md-button class="md-icon-button md-primary"><i class="fa fa-bell fa-lg"></i></md-button><md-button class="md-icon-button md-primary"><i class="fa fa-cog fa-lg"></i></md-button><md-button class="md-icon-button md-primary"><i class="fa fa-bars fa-lg"></i></md-button></md-toolbar></div><div layout=column id=mainContnet><div layout=row id=statsRow><md-card flex=50 class=md-whiteframe-5dp><md-card-header><md-card-header-text><span class="md-title md-primary">Statistics</span> <span class=md-subhead>high-level/summations</span></md-card-header-text></md-card-header><div layout=row id=recordStats><div flex=50><md-subheader>Records Divisions</md-subheader><p class=listItems ng-repeat="(key, val) in main.statusForRecords.divisions" ng-if="val > 0">{{key}}: {{val}}</p></div><div flex><md-subheader>Records Status</md-subheader><p class=listItems ng-repeat="(key, val) in main.statusForRecords.status" ng-if="val > 0">{{key}}: {{val}}</p></div></div></md-card><md-card id=searchCard class=md-whiteframe-5dp><md-card-header><md-card-header-text><span class=md-title>Controls</span> <span class=md-subhead>Filter/Export</span></md-card-header-text></md-card-header><md-input-container flex class=md-block id=searchContainer><label><i class="fa fa-search"></i> Search</label><input required name=searchFilter ng-model=main.searchFilters><div ng-messages=projectForm.searchFilter.$error><div ng-message=required>Input search queries to filter.</div></div></md-input-container><div><md-button id=moreInfoButton ng-disabled=true class="md-reaised md-primary">Add Record</md-button><md-button id=moreInfoButton ng-disabled=true class="md-reaised md-primary">Export</md-button></div></md-card></div><record id=record datasource=main.projects filter=main.searchFilters></record></div></md-content></section>'),a.put("app/record/record.html",'<div class=row><md-card class="col-sm-3 projCard" ng-repeat="project in datasource | advanceSearch:searchFilters"><md-subheader class=md-primary>{{project.title}}</md-subheader><div class=projectFields>Division:<span id=projSpan>{{project.division}}</span></div><div layout=row class=projectFields>Project Owner: <span id=projSpan ng-show="changeOwner !== $index">{{project.project_owner}}</span> <img flex=10 id=editIcon src=assets/images/edit.e970e905.svg alt="" ng-click="toggleOwner($index, project)"><md-input-container id=editInput ng-show="changeOwner === $index"><input ng-model=project.project_owner></md-input-container></div><div layout=row class=projectFields>Budget: <span id=projSpan ng-show="adjustBudget !== $index">{{project.budget | currency}}</span> <img flex=10 id=editIcon src=assets/images/edit.e970e905.svg alt="" ng-click="toggleBudget($index, project)"><md-input-container id=editInput ng-show="adjustBudget === $index"><input ng-model=project.budget></md-input-container></div><div layout=row class=projectFields>Status: <span id=projSpan ng-show="changeStatus !== $index" ng-class="{colorPrime: project.status ==  \'new\'}">{{project.status}}</span> <img flex=10 id=editIcon src=assets/images/edit.e970e905.svg alt="" ng-click="toggleStatus($index, project)"><md-input-container id=editInput ng-show="changeStatus === $index"><input ng-model=project.status></md-input-container></div><div class=projectFields>Date Created:<span id=projSpan>{{project.created}}</span></div><div class=projectFields>Date Modified:<span id=projSpan>{{project.modified || \'NA\'}}</span></div><div><md-button id=moreInfoButton class=md-primary>More Info</md-button></div></md-card></div>')}]);